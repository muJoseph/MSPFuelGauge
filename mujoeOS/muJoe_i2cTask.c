/*
 * muJoe_i2cTask.c
 *
 *  Created on: Nov 18, 2017
 *      Author: joe
 */



////////////////////////////////////////////////////////////////////////////////////////////////
// INCLUDE
////////////////////////////////////////////////////////////////////////////////////////////////

#include "muJoe_i2cTask.h"

////////////////////////////////////////////////////////////////////////////////////////////////
// STATIC FUNCTION PROTOS
////////////////////////////////////////////////////////////////////////////////////////////////

static void i2cTask_masterWriteHandler( void );

////////////////////////////////////////////////////////////////////////////////////////////////
// EXTERN VAR
////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////
// GLOBAL VAR
////////////////////////////////////////////////////////////////////////////////////////////////

uint8 i2cTask_taskId = 0;

////////////////////////////////////////////////////////////////////////////////////////////////
// LOCAL VAR
////////////////////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////////////
// FUNCTIONS
////////////////////////////////////////////////////////////////////////////////////////////////

void i2cTask_init( uint8 taskId )
{
    i2cTask_taskId = taskId;

    // Init Task Here

} // i2cTask_init

uint16 i2cTask_evtProcessor( uint8 taskId, uint16 events )
{
    // I2C Master Write Event
    if( events & I2CTASK_HANDLE_MASTER_WRITE_EVT )
    {
        i2cTask_masterWriteHandler();
        return (events ^ I2CTASK_HANDLE_MASTER_WRITE_EVT);
    }

    // Discard unknown events
    return 0;

} // i2cTask_evtProcessor

////////////////////////////////////////////////////////////////////////////////////////////////
// STATIC FUNCTIONS
////////////////////////////////////////////////////////////////////////////////////////////////

static void i2cTask_masterWriteHandler( void )
{
    i2cSlave_rxdPacketHandler();

} // i2cTask_masterWriteHandler


////////////////////////////////////////////////////////////////////////////////////////////////
// CALLBACK FUNCTIONS
////////////////////////////////////////////////////////////////////////////////////////////////

// Called when Configuration I2C register is written to by
// I2C bus master
void mspfg_configRegWriteCb( uint8 regData )
{
    if( regData & MSPFG_CFG_EN_HW_INT )
    {
        putBreakPtHere();
    }
    else
    {

    }

} // mspfg_configRegWriteCb

// Called when Fuel Level Critical Threshold I2C register
// is written to by I2C bus master
void mspfg_fuelLvlCritThreshRegWriteCb( uint8 regData )
{
    putBreakPtHere();
} // mspfg_fuelLvlCritThreshRegWriteCb
